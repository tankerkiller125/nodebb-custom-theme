// Homebox Dark Mode Skin
// Based on https://github.com/sysadminsmedia/homebox/blob/main/docs/src/styles/global.css
// Applied when users select any dark Bootswatch skin (e.g., darkly)
.skin-darkly {
	$dark-bg: hsl(75, 14%, 10%);
	$dark-bg-accent: hsl(75, 10%, 18%);
	$dark-fg: hsl(60, 20%, 95%);
	$dark-primary: hsl(139, 25%, 60%);
	$dark-primary-fg: hsl(139, 16%, 10%);
	$dark-muted: hsl(75, 10%, 18%);
	$dark-muted-fg: hsl(60, 10%, 80%);
	$dark-card: hsl(75, 14%, 12%);
	$dark-card-fg: hsl(60, 20%, 95%);
	$dark-border: hsl(75, 10%, 25%);
	$dark-input: hsl(75, 10%, 25%);
	$dark-sidebar: hsl(75, 14%, 8%);
	$dark-header: hsl(75, 14%, 8%);
	$dark-destructive: hsl(0, 72%, 51%);

	--bs-body-bg: #{$dark-bg};
	--bs-body-color: #{$dark-fg};
	--bs-border-color: #{$dark-border};
	--bs-tertiary-bg: #{$dark-bg-accent};
	--bs-secondary-bg: #{$dark-bg-accent};
	--bs-link-color: #{$dark-primary};
	--bs-link-hover-color: #{adjust-color($dark-primary, $lightness: 10%)};
	--bs-emphasis-color: #{$dark-fg};

	// Card styling
	--bs-card-bg: #{$dark-card};
	--bs-card-color: #{$dark-card-fg};
	--bs-card-border-color: #{$dark-border};
	--bs-card-cap-bg: #{$dark-bg-accent};
	--bs-card-cap-color: #{$dark-fg};

	// Form controls
	--bs-form-control-bg: #{$dark-bg};

	background-color: $dark-bg !important;
	color: $dark-fg;

	// Dark olive header in dark mode
	.brand-container {
		background-color: $dark-header;
		color: $dark-fg;

		a, .btn, span {
			color: $dark-fg !important;
		}
	}

	nav.sidebar, .bottombar-nav {
		color: $dark-fg !important;
		background-color: $dark-sidebar !important;
	}
	.bottombar-nav {
		.dropdown-menu {
			color: $dark-fg !important;
			background-color: $dark-sidebar !important;
		}
	}

	.card {
		background-color: $dark-card;
		border-color: $dark-border;
		color: $dark-fg;
	}

	.bg-card-cap {
		background-color: $dark-bg-accent !important;
	}

	.bg-body {
		background-color: $dark-bg !important;
	}

	.bg-light {
		background-color: $dark-bg-accent !important;
	}

	.text-dark {
		color: $dark-fg !important;
	}

	.text-muted {
		color: $dark-muted-fg !important;
	}

	.text-body {
		color: $dark-fg !important;
	}

	.form-control, .form-select {
		background-color: $dark-bg;
		border-color: $dark-border;
		color: $dark-fg;
		&:focus {
			background-color: $dark-bg;
			border-color: $dark-primary;
			color: $dark-fg;
			box-shadow: 0 0 0 0.2rem rgba($dark-primary, 0.2);
		}
	}

	.form-control::placeholder {
		color: $dark-muted-fg !important;
	}

	.dropdown-menu {
		background-color: $dark-card;
		border-color: $dark-border;
		color: $dark-fg;
		.dropdown-item {
			color: $dark-fg;
			&:hover, &:focus {
				background-color: $dark-bg-accent;
				color: $dark-fg;
			}
		}
	}

	.list-group-item {
		background-color: $dark-card;
		border-color: $dark-border;
		color: $dark-fg;
	}

	.modal-content {
		background-color: $dark-card;
		border-color: $dark-border;
		color: $dark-fg;
	}

	.btn-light {
		background-color: $dark-bg-accent;
		border-color: $dark-border;
		color: $dark-fg;
	}

	.text-bg-light {
		background-color: $dark-bg-accent !important;
		color: $dark-fg !important;
	}

	.border {
		border-color: $dark-border !important;
	}

	.border-bottom {
		border-color: $dark-border !important;
	}

	table > :not(caption) > * > * {
		color: $dark-fg;
	}

	blockquote {
		background-color: $dark-bg-accent !important;
		color: $dark-fg !important;
	}

	// Nova-inspired dark mode inline code styling
	[component="chat/message/body"],
	[component="post/content"],
	[component="topic/teaser"] .post-content,
	[component="category/posts"] .post-content,
	.post-queue.posts-list .post-content {
		code:not(pre code) {
			background-color: $dark-bg-accent;
			border-color: $dark-border;
			color: $dark-fg;
		}
	}

	// Dark mode code blocks
	.markdown-highlight {
		border-color: $dark-border !important;

		pre {
			background-color: $dark-card !important;
		}
	}

	// Dark mode scrollbar
	* {
		scrollbar-color: rgba(255, 255, 255, 0.2) $dark-bg;
	}

	::-webkit-scrollbar {
		background-color: $dark-bg;
	}

	::-webkit-scrollbar-thumb {
		background-color: rgba(255, 255, 255, 0.2);
	}

	::-webkit-scrollbar-track {
		background-color: $dark-bg;
	}

	::-webkit-scrollbar-thumb:hover {
		background-color: rgba(255, 255, 255, 0.3);
	}

	// Unread titles use primary color
	ul.topics-list, ul.categories-list {
		li.unread .title {
			color: $dark-primary !important;
		}
	}

	// Pagination
	[component="pagination"] {
		.page-item.active:not(.disabled) .page-link {
			color: $dark-fg;
			background-color: $dark-bg-accent;
			border-color: $dark-border;
		}
		.page-item:not(.disabled):hover .page-link {
			color: $dark-fg;
		}
	}
}